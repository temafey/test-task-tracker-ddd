ARG DOCKER_SERVER_HOST
ARG DOCKER_PROJECT_PATH
ARG DOCKER_PHP_VERSION
ARG DOCKER_IMAGE_VERSION=master

FROM ${DOCKER_SERVER_HOST}/${DOCKER_PROJECT_PATH}/php${DOCKER_PHP_VERSION}-fpm:master
# These ARGs should be after FROM or they will be empty

ARG DOCKER_UID=1000
ARG DOCKER_GID=1000

ENV COMPOSER_ALLOW_SUPERUSER 1
ENV COMPOSER_MEMORY_LIMIT -1
ENV COMPOSER_CACHE_DIR /.composer_cache
ENV COMPOSER_HOME /.composer

RUN set -eux \
    && apk add --no-cache git \
    && install-php-extensions @composer
